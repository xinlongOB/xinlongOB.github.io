<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>mvnç¯å¢ƒé…ç½®</title>
    <url>/2020/05/18/mvn/</url>
    <content><![CDATA[<h2 id="é…ç½®jdkç¯å¢ƒå˜é‡"><a href="#é…ç½®jdkç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®jdkç¯å¢ƒå˜é‡"></a>é…ç½®jdkç¯å¢ƒå˜é‡</h2><p>åˆ›å»ºç›®å½•</p>
<pre><code>mkdir /application/ </code></pre><p>è§£å‹jdkåŒ…åˆ°åˆ›å»ºçš„ç›®å½•ä¸­</p>
<pre><code>tar xf jdk-8u60-linux-x64.tar.gz   -C /application/</code></pre><p>åšè½¯è¿æ¥</p>
<pre><code>ln -s  /application/jdk1.8.0_60/ /application/jdk</code></pre><p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<pre><code>sed -i.ori &apos;$a export  JAVA_HOME=/application/jdk\nexport PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH\nexport  CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar&apos;  /etc/profile</code></pre><p>sourceä¸€ä¸‹ç”Ÿæ•ˆç¯å¢ƒå˜é‡</p>
<h2 id="é…ç½®mvnç¯å¢ƒå˜é‡"><a href="#é…ç½®mvnç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®mvnç¯å¢ƒå˜é‡"></a>é…ç½®mvnç¯å¢ƒå˜é‡</h2><pre><code>cd /application/ </code></pre><p>ä¸‹è½½mvnåŒ…</p>
<pre><code>wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.4/binaries/apache-maven-3.5.4-bin.tar.gz</code></pre><p>è§£å‹</p>
<pre><code>tar -zxvf apache-maven-3.5.4-bin.tar.gz</code></pre><p>vim /etc/profile</p>
<pre><code>export MAVEN_HOME=/application/apache-maven-3.0.5
export PATH=$PATH:$MAVEN_HOME/bin</code></pre><p>sourceä¸€ä¸‹ç”Ÿæ•ˆç¯å¢ƒå˜é‡</p>
<p>æœ€åå¯ä»¥ä½¿ç”¨mvn -v æŸ¥çœ‹</p>
<pre><code>[sgsm@localhost weblog]$ mvn  -v
Apache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-18T02:33:14+08:00)
Maven home: /home/sgsm/test3/apache-maven-3.5.4
Java version: 1.8.0_60, vendor: Oracle Corporation, runtime: /application/jdk1.8.0_60/jre
Default locale: zh_CN, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;3.10.0-514.21.2.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>liunx</tag>
        <tag>mvn</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitæ— æ³•æ·»åŠ ä¸»é¢˜æ–‡ä»¶å¤¹</title>
    <url>/2020/05/17/gitremove/</url>
    <content><![CDATA[<p>ç”±äºä¸»é¢˜éƒ½æ˜¯åœ¨gitä¸Šä¸‹è½½çš„æ‰€ä»¥é»˜è®¤ä¼šæœ‰ä¸€ä¸ª.gitçš„æ–‡ä»¶ï¼Œè¿™æ ·å¯¼è‡´æäº¤çš„æ—¶å€™æ— æ³•æäº¤ä¸»é¢˜æ–‡ä»¶<br><br>è§£å†³åŠæ³•<br></p>
<p>åˆ é™¤ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹.git</p>
<pre><code>git rm --cached themes/hexo-theme-ayer
git add .
git commit -m &quot;xxx&quot;
git push origin master</code></pre>]]></content>
      <tags>
        <tag>liunx</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§äº2Tçš„ç¡¬ç›˜éœ€è¦partedç£ç›˜åˆ†åŒº</title>
    <url>/2020/05/16/parted/</url>
    <content><![CDATA[<h2 id="é¦–å…ˆå®‰è£…parted"><a href="#é¦–å…ˆå®‰è£…parted" class="headerlink" title="é¦–å…ˆå®‰è£…parted"></a>é¦–å…ˆå®‰è£…parted</h2><pre><code>yum install parted   -y</code></pre><p>æŸ¥çœ‹ç¡¬ç›˜æƒ…å†µä½¿ç”¨fdisk -l æŸ¥çœ‹åˆ†åŒºæƒ…å†µï¼Œå¯¹äºå¤§äº2TBçš„ç¡¬ç›˜ç”¨partedåˆ†åŒº<br><br>æ ¼å¼åŒ– /dev/sdb<br></p>
<pre><code>parted /dev/sdb</code></pre><p>ä½¿ç”¨printæ‰“å°åˆ†åŒºä¿¡æ¯</p>
<pre><code>(parted) print</code></pre><p>å°†åˆ†åŒºè®¾ç½®æˆgptæ ¼å¼</p>
<pre><code>mklabel gpt    </code></pre><p>å°†æ‰€æœ‰ç©ºé—´åˆ›å»ºä¸€ä¸ªåˆ†åŒº</p>
<pre><code>mkpart primary 0 100%</code></pre><p>é€€å‡º</p>
<pre><code>quit</code></pre><h2 id="å°†ç¡¬ç›˜åˆ†ä¸ºä¸¤ä¸ªä¸»åˆ†åŒº"><a href="#å°†ç¡¬ç›˜åˆ†ä¸ºä¸¤ä¸ªä¸»åˆ†åŒº" class="headerlink" title="å°†ç¡¬ç›˜åˆ†ä¸ºä¸¤ä¸ªä¸»åˆ†åŒº"></a>å°†ç¡¬ç›˜åˆ†ä¸ºä¸¤ä¸ªä¸»åˆ†åŒº</h2><pre><code>[root@localhost ~]# parted /dev/sdb   
GNU Parted 1.8.1 Using /dev/sdb Welcome to GNU Parted! Type â€˜helpâ€™ to view a list of commands.
(parted) mklabel gpt           # å°†MBRç£ç›˜æ ¼å¼åŒ–ä¸ºGPT
(parted) print                       #æ‰“å°å½“å‰åˆ†åŒº
(parted) mkpart primary 0 4.5TB                # åˆ†ä¸€ä¸ª4.5Tçš„ä¸»åˆ†åŒº
(parted) mkpart primary 4.5TB 12TB      # åˆ†ä¸€ä¸ª7.5Tçš„ä¸»åˆ†åŒº
(parted) print                         #æ‰“å°å½“å‰åˆ†åŒº
(parted) quit é€€å‡º</code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>liunx</tag>
        <tag>parted</tag>
      </tags>
  </entry>
  <entry>
    <title>centoså®‰è£…sambaæ–‡ä»¶å…±äº«--éšè—ç›®å½•</title>
    <url>/2020/05/14/samba/</url>
    <content><![CDATA[<h2 id="é…ç½®ç¯å¢ƒâ€“å…³é—­é˜²ç«å¢™å’Œselinux"><a href="#é…ç½®ç¯å¢ƒâ€“å…³é—­é˜²ç«å¢™å’Œselinux" class="headerlink" title="é…ç½®ç¯å¢ƒâ€“å…³é—­é˜²ç«å¢™å’Œselinux"></a>é…ç½®ç¯å¢ƒâ€“å…³é—­é˜²ç«å¢™å’Œselinux</h2><p><br>centos6<br></p>
<pre><code>service  iptables  stop
service  ip6tables  stop</code></pre><p>centos7</p>
<pre><code>systemctl stop  firewalld</code></pre><p>æ°¸ä¹…å…³é—­</p>
<pre><code>chkconfig  iptables  off   
chkconfig  ip6tables  off   </code></pre><p>ä¸´æ—¶å…³é—­selinux</p>
<pre><code>setenforce 0</code></pre><p>æ°¸ä¹…å…³é—­selinux</p>
<pre><code>vim  /etc/selinux/config
    SELINUX=disabled</code></pre><p>é‡å¯ç”Ÿæ•ˆ</p>
<h2 id="å®‰è£…sambaæœåŠ¡"><a href="#å®‰è£…sambaæœåŠ¡" class="headerlink" title="å®‰è£…sambaæœåŠ¡"></a>å®‰è£…sambaæœåŠ¡</h2><pre><code>yum  install samba  samba-client  samba-common  samba-doc  -y </code></pre><h2 id="é…ç½®sambaæœåŠ¡"><a href="#é…ç½®sambaæœåŠ¡" class="headerlink" title="é…ç½®sambaæœåŠ¡"></a>é…ç½®sambaæœåŠ¡</h2><pre><code>cp  /etc/samba/smb.conf  /etc/samba/smb.conf_bak
vim /etc/samba/smb.conf
[global]     #å®šä¹‰å…¨å±€ç­–ç•¥
    workgroup = MYGROUP   #å®šä¹‰å·¥ä½œç»„
    server string = Samba Server Version %v #æœåŠ¡å™¨æç¤ºå­—ç¬¦ï¼Œé»˜è®¤æ˜¾ç¤ºsambaç‰ˆæœ¬
    log file = /var/log/samba/log.%m    #å®šä¹‰æ—¥å¿—æ–‡ä»¶
    max log size = 50      #å®šä¹‰æ—¥å¿—æ–‡ä»¶å•ä¸ªæ–‡ä»¶æœ€å¤§å®¹é‡ä¸º50KB
    security = user        #securityé€‰é¡¹å°†ä¼šå½±å“å®¢æˆ·ç«¯è®¿é—®æ–¹å¼       #å¯ä»¥è®¾ç½®userã€shareã€serverã€domainã€‚Userä»£è¡¨ç”¨æˆ·åå’Œå¯†ç éªŒè¯ï¼›shareä»£è¡¨åŒ¿åè®¿é—®ï¼›serverä»£è¡¨åŸºäºéªŒè¯èº«ä»½çš„è®¿é—®ï¼Œè´¦æˆ·ä¿¡æ¯åœ¨å¦ä¸€å°SMBæœåŠ¡å™¨ä¸Šï¼›domain:åŒæ ·åŸºäºéªŒè¯èº«ä»½éªŒè¯ï¼Œè´¦æˆ·ä¿¡æ¯åœ¨æ´»åŠ¨ç›®å½•ä¸­    
    passdb backend = tdbsam    #è´¦æˆ·ä¸å¯†ç å­˜å‚¨æ–¹å¼ï¼Œsmbpasswdä½¿ç”¨è€çš„æ˜æ–‡æ ¼å¼å­˜å‚¨è´¦æˆ·åŠå¯†ç ï¼›tdbsamä»£è¡¨åŸºäºTDBçš„å¯†æ–‡æ ¼å¼å­˜å‚¨ï¼›ldapsamä»£è¡¨ä½¿ç”¨LDAPå­˜å‚¨è´¦æˆ·èµ„æ–™ã€‚
    load printers = yes        #å®¢æˆ·ç«¯åœ¨10åˆ†é’Ÿå†…æ²¡æœ‰æ‰“å¼€ä»»ä½•Sambaèµ„æºï¼ŒæœåŠ¡å™¨å°†è‡ªåŠ¨å…³é—­å›è¯ã€‚
    cups options = raw       #æ‰“å°å±æ€§

    config file = /etc/samba/%U.smb.conf   #æŒ‡å®šæ‰©å±•æ–‡ä»¶


[dome]       #å…±äº«åç§°ä¸ºdome
    comment = Common share
    path = /common        #æŒ‡å®šå…±äº«ç›®å½•
    valid users = tom jerry    #æœ‰æ•ˆè´¦æˆ·åˆ—è¡¨
    create mask = 0750        #å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶çš„é»˜è®¤æƒé™
    directorymask = 0775       #å®¢æˆ·ç«¯åˆ›å»ºç›®å½•çš„é»˜è®¤æƒé™ 
    browseable = yes       #å®¢æˆ·ç«¯æ˜¯å¦å¯¹æ‰€æœ‰äººå¯è§    
    writable= no          #æ˜¯å¦å…è®¸å†™å…¥
    write list = tom       #å†™æƒé™è´¦æˆ·åˆ—è¡¨
    admin users = tom       #è¯¥å…±äº«çš„ç®¡ç†å‘˜ï¼Œå…·æœ‰å®Œå…¨æƒé™
    invalid users = root bin    #ç¦æ­¢rootä¸binè®¿é—®commonå…±äº«
      guest ok = no       #æ˜¯å¦å…è®¸åŒ¿åè®¿é—®


[server]
    path = /share/samba/server
    directory  mask = 0755
    create mask = 0644
    valid users = yanfa
    browseable = no

[meishu]
    path = /share/samba/meishu
    directory  mask =0755
    create mask =0644
    valid users = meishu
    browseable = no

[yunyingmeishu]
    path = /share/samba/yunyingmeishu
    directory  mask =0755
    create mask =0644
    valid users = yunying
    browseable = no</code></pre><h2 id="åˆ›å»ºæ‰©å±•æ–‡ä»¶"><a href="#åˆ›å»ºæ‰©å±•æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ‰©å±•æ–‡ä»¶"></a>åˆ›å»ºæ‰©å±•æ–‡ä»¶</h2><pre><code>cd /etc/samba/

vim   yanfa.smb.conf  
    [share]
    security = user
    path = /share/samba/yanfa
    valid users = @yanfa
    read list = @yanfa
    write list = @yanfa
    writable = yes
    create mask = 0644
    directory mask = 0755 


vim   meishu.smb.conf   
    [meishu]
    security = user
    path = /share/samba/meishu
    valid users = @meishu
    read list = @meishu
    write list = @meishu
    writable = yes
    create mask = 0644
    directory mask = 0755


vim   yunying.smb.conf 
    [yunying]
    security = user
    path = /share/samba/yunyingmeishu
    valid users = @yunying
    read list = @yunying
    write list = @yunying
    writable = yes
    create mask = 0644
    directory mask = 0755</code></pre><h2 id="åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹"><a href="#åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹"></a>åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹</h2><p>  mkdir /share/samba/{yanfa,meishu,yunyingmeishu}    -p</p>
<h2 id="åˆ›å»ºç™»å½•ç”¨æˆ·"><a href="#åˆ›å»ºç™»å½•ç”¨æˆ·" class="headerlink" title="åˆ›å»ºç™»å½•ç”¨æˆ·"></a>åˆ›å»ºç™»å½•ç”¨æˆ·</h2><pre><code>useradd  yanfa
useradd  meishu
useradd  yunying</code></pre><h2 id="åˆ›å»ºsambaç”¨æˆ·â€“éœ€è¦äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œæ­¤å¯†ç å’Œç³»ç»Ÿç”¨æˆ·å¯†ç æ— å…³"><a href="#åˆ›å»ºsambaç”¨æˆ·â€“éœ€è¦äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œæ­¤å¯†ç å’Œç³»ç»Ÿç”¨æˆ·å¯†ç æ— å…³" class="headerlink" title="åˆ›å»ºsambaç”¨æˆ·â€“éœ€è¦äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œæ­¤å¯†ç å’Œç³»ç»Ÿç”¨æˆ·å¯†ç æ— å…³"></a>åˆ›å»ºsambaç”¨æˆ·â€“éœ€è¦äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œæ­¤å¯†ç å’Œç³»ç»Ÿç”¨æˆ·å¯†ç æ— å…³</h2><pre><code>pdbedit -a  yanfa
pdbedit -a  meishu
pdbedit -a  yunying</code></pre><p>pdbeditå¸¸ç”¨å‚æ•°</p>
<pre><code>pdbedit -L  ï¼šæŸ¥çœ‹sambaç”¨æˆ·
pdbedit -Lvï¼šåˆ—å‡ºSambaç”¨æˆ·åˆ—è¡¨è¯¦ç»†ä¿¡æ¯
pdbedit -a  -u  userï¼šæ·»åŠ sambaç”¨æˆ·
pdbedit -r  -u  userï¼šä¿®æ”¹sambaç”¨æˆ·ä¿¡æ¯
pdbedit -x  -u  userï¼š åˆ é™¤sambaç”¨æˆ·</code></pre><h2 id="å…±äº«æ–‡ä»¶å¤¹æ›´æ”¹æƒé™"><a href="#å…±äº«æ–‡ä»¶å¤¹æ›´æ”¹æƒé™" class="headerlink" title="å…±äº«æ–‡ä»¶å¤¹æ›´æ”¹æƒé™"></a>å…±äº«æ–‡ä»¶å¤¹æ›´æ”¹æƒé™</h2><pre><code>cd  /share/samba/
chown  meishu.meishu  meishu/ -R
chown   yunying.yunying  yunyingmeishu/ -R
chown  yanfa.yanfa  yanfa/ -R</code></pre><h2 id="å¯åŠ¨æœåŠ¡å°±å¯ä»¥è®¿é—®äº†"><a href="#å¯åŠ¨æœåŠ¡å°±å¯ä»¥è®¿é—®äº†" class="headerlink" title="å¯åŠ¨æœåŠ¡å°±å¯ä»¥è®¿é—®äº†"></a>å¯åŠ¨æœåŠ¡å°±å¯ä»¥è®¿é—®äº†</h2><pre><code>/etc/init.d/smb  start
/etc/init.d/nmb  start</code></pre><h2 id="å¥½ç¤¼å¤§æ”¾é€â€“windå®¢æˆ·ç«¯æ¸…ç†å·²ä¿å­˜çš„sambaç”¨æˆ·å’Œå¯†ç "><a href="#å¥½ç¤¼å¤§æ”¾é€â€“windå®¢æˆ·ç«¯æ¸…ç†å·²ä¿å­˜çš„sambaç”¨æˆ·å’Œå¯†ç " class="headerlink" title="å¥½ç¤¼å¤§æ”¾é€â€“windå®¢æˆ·ç«¯æ¸…ç†å·²ä¿å­˜çš„sambaç”¨æˆ·å’Œå¯†ç "></a>å¥½ç¤¼å¤§æ”¾é€â€“windå®¢æˆ·ç«¯æ¸…ç†å·²ä¿å­˜çš„sambaç”¨æˆ·å’Œå¯†ç </h2><pre><code>net  use      # æŸ¥çœ‹å·²ä¿å­˜çš„ç”¨æˆ·å’Œå¯†ç 

net use  *  /del   /y     # æ¸…é™¤æ‰€æœ‰è´¦å·å¯†ç </code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>liunx</tag>
        <tag>samba</tag>
      </tags>
  </entry>
  <entry>
    <title>Mongoå¸¸è§æŠ¥é”™</title>
    <url>/2020/05/14/MongoError/</url>
    <content><![CDATA[<p>mongodå®•æœºå¸¸è§æŠ¥é”™</p>
<pre><code>/data/lib/mongo//WiredTiger.turtle: handle-open: open: Permission denied</code></pre><p>  è§£å†³åŠæ³•ç›´æ¥ç»™æƒé™</p>
<pre><code>sudo chown  mongod.mongod   ./*  -R</code></pre><p>è¿˜æœ‰ä¸€ç§æ˜¯éæ­£å¸¸å…³é—­mongoå†æ¬¡å¯åŠ¨ä¼šå¤±è´¥  ä½¿ç”¨</p>
<pre><code>sudo  journalctl -xe</code></pre><p>æŸ¥çœ‹åˆ°æŠ¥é”™</p>
<pre><code>Error starting mongod. /var/run/mongodb/mongod.pid exists.</code></pre><p>æ˜¯å› ä¸ºéæ­£å¸¸å…³é—­mongoçš„æ—¶å€™pidæ–‡ä»¶è¿˜å­˜åœ¨ï¼Œåˆ é™¤åå¯åŠ¨å°±æ­£å¸¸äº†</p>
<p>æŸ¥çœ‹mongoè¿æ¥æ•°</p>
<pre><code>db.serverStatus().connections
{ &quot;current&quot; : 80, &quot;available&quot; : 52348, &quot;totalCreated&quot; : NumberLong(367) }</code></pre><p>Currentè¡¨ç¤ºå½“å‰åˆ°å®ä¾‹ä¸Šæ­£åœ¨è¿è¡Œçš„è¿æ¥æ•°ã€‚<br><br>Availableè¡¨ç¤ºå½“å‰å®ä¾‹è¿˜å¯ä»¥æ”¯æŒçš„å¹¶å‘è¿æ¥æ•°ã€‚<br></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>mongo</tag>
        <tag>liunx</tag>
      </tags>
  </entry>
  <entry>
    <title>lamp</title>
    <url>/2020/05/13/lamp/</url>
    <content><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® -->

<blockquote>
<p>&amp;  è¡¨ç¤ºä»»åŠ¡åœ¨åå°æ‰§è¡Œï¼Œå¦‚è¦åœ¨åå°è¿è¡Œredis-server,åˆ™æœ‰  redis-server &amp;<br>&amp;&amp; è¡¨ç¤ºå‰ä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œæ‰æ‰§è¡Œåä¸€æ¡å‘½ä»¤ ï¼Œå¦‚ echo â€˜1â€™ &amp;&amp; echo â€˜2â€™<br>| è¡¨ç¤ºç®¡é“ï¼Œä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºï¼Œä½œä¸ºä¸‹ä¸€æ¡å‘½ä»¤å‚æ•°ï¼Œå¦‚ echo â€˜yesâ€™ | wc -l<br>|| è¡¨ç¤ºä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ï¼Œå¦‚ cat nofile || echo â€œfailâ€</p>
</blockquote>
<h1 id="å®‰è£…apache"><a href="#å®‰è£…apache" class="headerlink" title="å®‰è£…apache"></a>å®‰è£…apache</h1><h2 id="ä¸‹è½½å’Œå®‰è£…ä¾èµ–"><a href="#ä¸‹è½½å’Œå®‰è£…ä¾èµ–" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…ä¾èµ–"></a>ä¸‹è½½å’Œå®‰è£…ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install autoconf libtool gcc expat expat-devel make zlib-devel gcc-c++ openssl-devel pcre-devel openssl</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥ https://mirror.bit.edu.cn/apache//apr/ æ‰¾åˆ°æœ€æ–°çš„ apr å’Œ apr-util åŒ…å³å¯</span></span><br><span class="line">wget https://mirror.bit.edu.cn/apache//apr/apr-1.7.0.tar.gz</span><br><span class="line">wget https://mirror.bit.edu.cn/apache/httpd/httpd-2.4.43.tar.gz</span><br><span class="line">wget https://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å®‰è£…apr"><a href="#ç¼–è¯‘å®‰è£…apr" class="headerlink" title="ç¼–è¯‘å®‰è£…apr"></a>ç¼–è¯‘å®‰è£…apr</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘ configureæ–‡ä»¶ï¼ŒæŸ¥æ‰¾ $RM "$cfgfile" è¿™ä¸ªåœ°æ–¹ï¼Œç”¨#æ³¨é‡Šæ‰</span></span><br><span class="line">31880è¡Œ <span class="comment">#    $RM "$cfgfile"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨configureé‡Œé¢ RM='$RM  -f' è¿™é‡Œçš„$RMåé¢ä¸€å®šæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ å¦‚æœåé¢æ²¡æœ‰ç©ºæ ¼ï¼Œç›´æ¥è¿æ¥å‡å·ï¼Œå°±ä¾ç„¶ä¼šæŠ¥é”™ã€‚æŠŠ RM='$RM' æ”¹ä¸º RM='$RM -f'</span></span><br><span class="line">31279è¡Œ     RM=<span class="string">'$RM -f'</span></span><br><span class="line"><span class="comment"># æ›´æ”¹ä¸Šé¢ä¸¤è¡Œï¼Œå¦åˆ™./configureä¼šæŠ¥é”™ï¼šrm: cannot remove `libtoolT': No such file or directory</span></span><br><span class="line">./configure --prefix=/home/lamp/apr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å®‰è£…apr-util"><a href="#ç¼–è¯‘å®‰è£…apr-util" class="headerlink" title="ç¼–è¯‘å®‰è£…apr-util"></a>ç¼–è¯‘å®‰è£…apr-util</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŒ‡æ˜aprçš„å®‰è£…ä½ç½®--with-apr=/home/lamp/apr</span></span><br><span class="line">./configure --prefix=/home/lamp/apr-util --with-apr=/home/lamp/apr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å®‰è£…apache"><a href="#ç¼–è¯‘å®‰è£…apache" class="headerlink" title="ç¼–è¯‘å®‰è£…apache"></a>ç¼–è¯‘å®‰è£…apache</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/lamp/apache2 --with-apr=/home/lamp/apr --with-apr-util=/home/lamp/apr-util</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h1 id="å¯åŠ¨apache"><a href="#å¯åŠ¨apache" class="headerlink" title="å¯åŠ¨apache"></a>å¯åŠ¨apache</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/lamp/apache2</span><br><span class="line"><span class="comment"># ä¿®æ”¹ç«¯å£ä¸º800</span></span><br><span class="line">./bin/httpd -k start</span><br><span class="line">curl localhost:800</span><br><span class="line"><span class="comment"># æ˜¾ç¤º&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®åŸºäºåŸŸåè®¿é—®ä¸åŒèµ„æºç›®å½•"><a href="#é…ç½®åŸºäºåŸŸåè®¿é—®ä¸åŒèµ„æºç›®å½•" class="headerlink" title="é…ç½®åŸºäºåŸŸåè®¿é—®ä¸åŒèµ„æºç›®å½•"></a>é…ç½®åŸºäºåŸŸåè®¿é—®ä¸åŒèµ„æºç›®å½•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘httpd.confï¼Œåœ¨æ–‡ä»¶æœ€ååŠ å…¥ä»¥ä¸‹å‡ è¡Œï¼š</span></span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">&lt;VirtualHost *:800&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/home/lamp/apache2/htdocs/"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">    <span class="comment"># è®¿é—®www.example.comä¼šè®¿é—®/home/lamp/apache2/htdocs/ç›®å½•ä¸‹çš„èµ„æº</span></span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:800&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/home/lamp/apache2/htdocs/org/"</span></span><br><span class="line">    ServerName www.example.org</span><br><span class="line">    <span class="comment"># è®¿é—®www.example.orgä¼šè®¿é—®/home/lamp/apache2/htdocs/org/ç›®å½•ä¸‹çš„èµ„æº</span></span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®hostsæ–‡ä»¶ï¼ï¼ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/lamp/apache2/</span><br><span class="line">mkdir htdocs/org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¾‘htdocs/index.htmlå¡«å…¥www.example.com</span></span><br><span class="line">cat &gt; htdocs/index.html &lt;&lt; EOF</span><br><span class="line">www.example.com</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¾‘htdocs/org/index.htmlå¡«å…¥www.example.org</span></span><br><span class="line">cat &gt; htdocs/org/index.html &lt;&lt; EOF</span><br><span class="line">www.example.org</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ è®¿é—®</span></span><br><span class="line">./bin/httpd -k restart</span><br><span class="line"></span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.org:800</span></span><br><span class="line">www.example.org</span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.com:800</span></span><br><span class="line">www.example.com</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®åŸºäºç«¯å£è®¿é—®ä¸åŒèµ„æºç›®å½•"><a href="#é…ç½®åŸºäºç«¯å£è®¿é—®ä¸åŒèµ„æºç›®å½•" class="headerlink" title="é…ç½®åŸºäºç«¯å£è®¿é—®ä¸åŒèµ„æºç›®å½•"></a>é…ç½®åŸºäºç«¯å£è®¿é—®ä¸åŒèµ„æºç›®å½•</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä¸Šæ–‡çš„åŸºç¡€ä¸Šå¢åŠ www.example.com:8000ç«¯å£ï¼Œç›´æ¥åœ¨é…ç½®æ–‡ä»¶æœ€ä¸‹é¢æ·»åŠ ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">&lt;VirtualHost *:8000&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/home/lamp/apache2/htdocs/8000/"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">    <span class="comment"># è®¿é—®www.example.com:8000ä¼šè®¿é—®/htdocs/8000/ç›®å½•ä¸‹çš„èµ„æº</span></span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="comment"># åœ¨ç›‘å¬ç«¯å£ä¸‹é¢å¢åŠ æ–°çš„ç›‘å¬ç«¯å£</span></span><br><span class="line">Listen 800</span><br><span class="line">Listen 8000</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯-1"><a href="#éªŒè¯-1" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir htdocs/8000</span><br><span class="line"></span><br><span class="line">cat &gt; htdocs/8000/index.html &lt;&lt; EOF</span><br><span class="line">www.example.com:8000</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line">./bin/httpd -t   <span class="comment"># æ˜¾ç¤ºSyntax OKå³å¯</span></span><br><span class="line"></span><br><span class="line">./bin/httpd -k restart</span><br><span class="line"></span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.com:8000</span></span><br><span class="line">www.example.com:8000</span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.com:800</span></span><br><span class="line">www.example.com</span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.org:800</span></span><br><span class="line">www.example.org</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®åŸºäºè™šæ‹Ÿä¸»æœºè®¿é—®ä¸åŒèµ„æºç›®å½•"><a href="#é…ç½®åŸºäºè™šæ‹Ÿä¸»æœºè®¿é—®ä¸åŒèµ„æºç›®å½•" class="headerlink" title="é…ç½®åŸºäºè™šæ‹Ÿä¸»æœºè®¿é—®ä¸åŒèµ„æºç›®å½•"></a>é…ç½®åŸºäºè™šæ‹Ÿä¸»æœºè®¿é—®ä¸åŒèµ„æºç›®å½•</h2><p>&emsp;&emsp;æ³¨é‡Šæ‰ä¸Šé¢çš„3ä¸ªé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¢åŠ æ–°çš„é…ç½®</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼IPåœ°å€æ˜¯ä¸»æœºè‡ªå¸¦çš„IPåœ°å€ï¼Œå¹¶éè™šæ‹Ÿä¸å­˜åœ¨çš„ã€‚æ”¹å®Œé…ç½®è¦ä¿®æ”¹hostsè§£æï¼ï¼ï¼</span></span><br><span class="line">&lt;VirtualHost 192.168.1.100&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/home/lamp/apache2/htdocs/100/"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">    <span class="comment"># è®¿é—®www.example.com:800ä¼šè®¿é—®htdocs/100/ç›®å½•ä¸‹çš„èµ„æº</span></span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.1.200&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/home/lamp/apache2/htdocs/200/"</span></span><br><span class="line">    ServerName www.example.org</span><br><span class="line">    <span class="comment"># è®¿é—®www.example.org:800ä¼šè®¿é—®htdocs/200/ç›®å½•ä¸‹çš„èµ„æº</span></span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h3 id="éªŒè¯-2"><a href="#éªŒè¯-2" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./bin/httpd -k restart</span><br><span class="line"></span><br><span class="line">mkdir htdocs/&#123;1,2&#125;00</span><br><span class="line">cat &gt; htdocs/100/index.html &lt;&lt; EOF</span><br><span class="line">www.example.com  100</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt; htdocs/200/index.html &lt;&lt; EOF</span><br><span class="line">www.example.org  200</span><br><span class="line">EOF</span><br><span class="line">./bin/httpd -k restart</span><br><span class="line"></span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.com:800</span></span><br><span class="line">www.example.com  100</span><br><span class="line">[root@www apache2]<span class="comment"># curl www.example.org:800</span></span><br><span class="line">www.example.org  200</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®åŸºäºç®€å•çš„ç”¨æˆ·å¯†ç éªŒè¯è®¿é—®"><a href="#é…ç½®åŸºäºç®€å•çš„ç”¨æˆ·å¯†ç éªŒè¯è®¿é—®" class="headerlink" title="é…ç½®åŸºäºç®€å•çš„ç”¨æˆ·å¯†ç éªŒè¯è®¿é—®"></a>é…ç½®åŸºäºç®€å•çš„ç”¨æˆ·å¯†ç éªŒè¯è®¿é—®</h2><p>&emsp;&emsp;æ³¨é‡Šæ‰ä¸Šé¢çš„é…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;Directory /usr/<span class="built_in">local</span>/apache2/htdocs/wang&gt;</span><br><span class="line">        AuthName <span class="string">"wang Auth"</span></span><br><span class="line">        AuthType basic</span><br><span class="line">        AuthUserFile /usr/<span class="built_in">local</span>/apache2/.htpasswd</span><br><span class="line">        Require user wang</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"><span class="comment"># AuthName "wang Auth"   è¯¥å­—ç¬¦ä¸²æ˜¾ç¤ºåœ¨ç½‘é¡µè®¿é—®æ—¶è¾“å…¥ç”¨æˆ·å¯†ç çš„å¯¹è¯æ¡†ä¹‹ä¸Šï¼Œå®é™…æµ‹è¯•å¹¶æœªæ˜¾ç¤º</span></span><br><span class="line"><span class="comment"># AuthType basic         å®šä¹‰éªŒè¯æ¨¡å—ç±»å‹</span></span><br><span class="line"><span class="comment"># AuthUserFile /file     å¯†ç æ–‡ä»¶çš„å­˜æ”¾åœ°å€</span></span><br><span class="line"><span class="comment"># Require user wang      è®¾ç½®å“ªäº›ç”¨æˆ·ç”Ÿæ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™äº›æ³¨é‡Šä¹Ÿèƒ½å®ç°ç”¨æˆ·å¯†ç è®¿é—®ï¼Œå»ºè®®ç•™å­˜ä»¥ä¾¿è§£å†³ä¸€äº›æœªçŸ¥çš„bugï¼Œå¦‚æœä½ æ˜¯yumå®‰è£…çš„httpdï¼Œä½ å¯ä»¥ç›´æ¥ä¿®æ”¹conf.d/userdir.confæ–‡ä»¶ï¼Œç›´æ¥åœ¨æœ€ä¸‹é¢å¢åŠ ä¸Šè¿°é…ç½®å³å¯ã€‚</span></span><br><span class="line">&lt;IfModule mod_userdir.c&gt;</span><br><span class="line">    UserDir public_html</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory /home/*/public_html&gt;</span><br><span class="line">    AllowOverride FileInfo AuthConfig Limit</span><br><span class="line">    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec</span><br><span class="line">    &lt;Limit GET POST OPTIONS&gt;</span><br><span class="line">        Order allow,deny</span><br><span class="line">        Allow from all</span><br><span class="line">    &lt;/Limit&gt;</span><br><span class="line">    &lt;LimitExcept GET POST OPTIONS&gt;</span><br><span class="line">        Order deny,allow</span><br><span class="line">        Deny from all</span><br><span class="line">    &lt;/LimitExcept&gt;</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯-3"><a href="#éªŒè¯-3" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./bin/httpd -k restart</span><br><span class="line"><span class="comment"># åˆ›å»ºç”¨æˆ·ï¼š</span></span><br><span class="line">useradd wang</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/apache2</span><br><span class="line">mkdir htdocs/wang</span><br><span class="line">cat &gt; htdocs/wang/index.html &lt;&lt; EOF</span><br><span class="line">wang auth</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆå¯†ç æ–‡ä»¶ï¼Œä¿®æ”¹å¯†ç å†æ¬¡æ‰§è¡Œæ­¤å‘½ä»¤å³å¯</span></span><br><span class="line">./bin/htpasswd -c -m /home/lamp/apache2/.htpasswd wang</span><br><span class="line"><span class="comment"># è¾“å…¥å¯†ç a123456</span></span><br><span class="line"></span><br><span class="line">cat .htpasswd</span><br><span class="line"><span class="comment"># æ˜¾ç¤º wang:$apr1$eL9wB7zB$F6bE1abbu1vGDVrW4Ji9V1</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹</th>
<th align="left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-c</td>
<td align="left">è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œä»…åº”è¯¥åœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä½¿ç”¨(åˆå»ºæ—¶ä½¿ç”¨-c,å†æ¬¡åˆ›å»ºä¸å–æ¶ˆè¯¥é€‰é¡¹åˆ™ä¼šè¦†ç›–ä¹‹å‰å†…å®¹)</td>
</tr>
<tr>
<td align="left">-m</td>
<td align="left">md5æ ¼å¼åŠ å¯†</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">shaæ ¼å¼åŠ å¯†</td>
</tr>
<tr>
<td align="left">-D</td>
<td align="left">åˆ é™¤æŒ‡å®šç”¨æˆ·</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">curl www.example.com:800/wang</span><br><span class="line"><span class="comment"># æŠ¥é”™401</span></span><br><span class="line"><span class="comment"># ä¸‹è½½elinks</span></span><br><span class="line">wget http://rpmfind.net/linux/centos/8.1.1911/PowerTools/x86_64/os/Packages/elinks-0.12-0.58.pre6.el8.x86_64.rpm</span><br><span class="line">rpm -ivh elinks-0.12-0.58.pre6.el8.x86_64.rpm</span><br><span class="line"><span class="comment"># elinksè®¿é—®</span></span><br><span class="line">elinks http://www.example.com:800/wang</span><br><span class="line"><span class="comment"># è¾“å…¥ç”¨æˆ·åå¯†ç  &gt;&gt; ç‚¹å‡»OK &gt;&gt; ç‚¹å‡»here ï¼ˆâ‘ å¯ä»¥é¼ æ ‡æ“ä½œï¼Œâ‘¡å¯ä»¥é€šè¿‡æ–¹å‘é”®ç§»åŠ¨å…‰æ ‡ï¼Œenterç¡®è®¤ï¼‰</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/13/lamp/lamp/0.jpg" alt><br><img src="/2020/05/13/lamp/lamp/1.jpg" alt><br><img src="/2020/05/13/lamp/lamp/2.jpg" alt></p>
<h3 id="æ‰©å±•åŸºäºç»„ç”¨æˆ·å¯†ç è®¿é—®"><a href="#æ‰©å±•åŸºäºç»„ç”¨æˆ·å¯†ç è®¿é—®" class="headerlink" title="æ‰©å±•åŸºäºç»„ç”¨æˆ·å¯†ç è®¿é—®"></a>æ‰©å±•åŸºäºç»„ç”¨æˆ·å¯†ç è®¿é—®</h3><p>&emsp;&emsp;ä¸Šé¢çš„<strong>é…ç½®ä¸å˜</strong>ï¼Œå¢åŠ ä¸¤è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;Directory /usr/<span class="built_in">local</span>/apache2/htdocs/wang&gt;</span><br><span class="line">        AuthName <span class="string">"wang Auth"</span></span><br><span class="line">        AuthType basic</span><br><span class="line">        AuthUserFile /usr/<span class="built_in">local</span>/apache2/.htpasswd</span><br><span class="line">        Require user wang</span><br><span class="line">        AuthGroupFile /usr/<span class="built_in">local</span>/apache2/groupfile   <span class="comment"># ç»„æ–‡ä»¶</span></span><br><span class="line">        Require group wang   <span class="comment"># å…è®¸çš„ç»„</span></span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"><span class="comment"># é€šè¿‡ä¸Šé¢çš„é…ç½®æ–‡ä»¶å¯çŸ¥ï¼Œå…è®¸wangç»„é‡Œé¢çš„ç”¨æˆ·è®¿é—®ï¼Œå…è®¸ç”¨æˆ·wangè®¿é—®</span></span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯-4"><a href="#éªŒè¯-4" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./bin/httpd -k restart</span><br><span class="line">cat &gt; groupfile &lt;&lt; EOF</span><br><span class="line">wang:<span class="built_in">test</span></span><br><span class="line">test0:test0</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># :å‰é¢æ˜¯ç»„åï¼Œåé¢æ˜¯ç”¨æˆ·åï¼›ç»„åç­‰äºhttp.confä¸­çš„Require group wangè§„å®šçš„ç»„å</span></span><br><span class="line"><span class="comment"># å¢åŠ ç”¨æˆ·testï¼Œtest0</span></span><br><span class="line">./bin/htpasswd -m /home/lamp/apache2/.htpasswd <span class="built_in">test</span></span><br><span class="line">./bin/htpasswd -m /home/lamp/apache2/.htpasswd test0</span><br><span class="line"><span class="comment"># ç”±é…ç½®æ–‡ä»¶å¯çŸ¥ï¼Œå…è®¸testï¼Œå’Œwangè®¿é—®ï¼Œä¸å…è®¸test0è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†åˆ«è¾“å…¥wangï¼Œtestï¼Œtest0ç”¨æˆ·å¯†ç éªŒè¯å³å¯</span></span><br><span class="line">elinks http://www.example.com:800/wang</span><br></pre></td></tr></table></figure>

<h1 id="ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜"><a href="#ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜"></a>ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜</h1><ol>
<li>httpd.confé…ç½®æ–‡ä»¶ä¸­ï¼Œå¡«å†™çš„è·¯å¾„ä¸å¯¹</li>
<li>å¤šä½¿ç”¨./bin/httpd -tæ£€æŸ¥ï¼Œå¯ä»¥é¿å…å¾ˆå¤šçš„ç²—å¿ƒé”™è¯¯</li>
<li>ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ä¸€å®šè®°å¾—é‡å¯ï¼Œ./bin/httpd -k restart</li>
<li>ç«¯å£ï¼Œèµ„æºç›®å½•ï¼Œç›®å½•æƒé™ç­‰ï¼Œä¸€å®šè¦å†ä¸‰éªŒè¯</li>
<li>ä½ é‡åˆ°çš„å…¶å®ƒé—®é¢˜æ¬¢è¿ç•™è¨€~</li>
</ol>
<h1 id="ç¼–è¯‘MySQL"><a href="#ç¼–è¯‘MySQL" class="headerlink" title="ç¼–è¯‘MySQL"></a>ç¼–è¯‘MySQL</h1><p>&emsp;&emsp;å®‰è£…ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># MySQLæºç åœ°å€ï¼šhttps://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.20.tar.gz</span></span><br><span class="line">yum install -y ncurses-devel libtirpc-devel cmake</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼ºå°‘ï¼šlibtirpc-devel</span></span><br><span class="line"><span class="comment"># æŠ¥é”™ï¼šCould not find rpc/rpc.h in /usr/include or /usr/include/tirpc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼ºå°‘ï¼šncurses-devel</span></span><br><span class="line"><span class="comment"># æŠ¥é”™ï¼šCurses library not found. Please install appropriate package</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼ºå°‘ï¼šrpcsvc</span></span><br><span class="line"><span class="comment"># æŠ¥é”™ï¼šCould not find rpcgen</span></span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…</span></span><br><span class="line">wget https://github.com/thkukuk/rpcsvc-proto/releases/download/v1.4.1/rpcsvc-proto-1.4.1.tar.xz</span><br><span class="line">tar xf rpcsvc-proto-1.4.1.tar.xz</span><br><span class="line"><span class="built_in">cd</span> rpcsvc-proto-1.4.1/</span><br><span class="line">./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir /home/lamp/mysql/data -p</span><br><span class="line"></span><br><span class="line">cmake . \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/home/lamp/mysql \</span><br><span class="line">-DMYSQL_DATADIR=/home/lamp/mysql/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/home/lamp/mysql/mysql.sock \</span><br><span class="line">-DWITH_INNODBBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DENABLE_LOCAL_INFILE=1 \</span><br><span class="line">-DEXTRA_CHARSETS=all \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DMYSQL_USER=mysql \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DFORCE_INSOURCE_BUILD=1 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 -DWITH_BOOST=/home/lamp/boost \</span><br><span class="line">-DWITH_EMBEDED_SERVER=0</span><br><span class="line"><span class="comment"># boostä¸‹è½½è¶…æ—¶çš„è¯ï¼Œè®°å½•ä¸‹è½½åœ°å€ï¼šhttps://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.gz</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨è¿…é›·ä¸‹è½½ï¼Œå¤§çº¦ä¸åˆ°1minå°±ä¸‹è½½å¥½äº†</span></span><br><span class="line"><span class="comment"># ç§»åŠ¨åˆ°/home/lamp/boostç›®å½•ä¸‹é¢</span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘æ—¶é—´è¾ƒé•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿é•¿ğŸ˜¡</p>
<h2 id="ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜-1"><a href="#ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜-1" class="headerlink" title="ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜"></a>ä¸€èˆ¬é‡åˆ°çš„é—®é¢˜</h2><ol>
<li>ä¾èµ–é—®é¢˜</li>
<li>ç½‘é€Ÿå¤ªæ…¢</li>
<li>ç¼–è¯‘çš„æ—¶å€™å†…å­˜ä¸è¶³</li>
<li>ç›®å½•æƒé™</li>
</ol>
<p>ä¸ç­‰å¾…ç›´æ¥ç¼–è¯‘PHP</p>
<h1 id="ç¼–è¯‘PHP"><a href="#ç¼–è¯‘PHP" class="headerlink" title="ç¼–è¯‘PHP"></a>ç¼–è¯‘PHP</h1><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install libxml2-devel bzip2-devel net-snmp-devel curl-devel libpng-devel freetype-devel libjpeg-devel -y</span><br><span class="line"></span><br><span class="line">wget http://ftp.gnu.org/gnu/libiconv/libiconv-1.16.tar.gz</span><br><span class="line"><span class="comment"># wget http://ftp.gnu.org/gnu/libiconv/libiconv-1.14.tar.gz</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span> --with-apr=/home/lamp/apr</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">wget https://sourceforge.net/projects/mcrypt/files/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz</span><br><span class="line">./configure &amp;&amp; make &amp;&amp; make install &amp;&amp; /sbin/ldconfig</span><br><span class="line"><span class="built_in">cd</span> libltdl/</span><br><span class="line">./configure --<span class="built_in">enable</span>-ltdl-install &amp;&amp; make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">wget https://jaist.dl.sourceforge.net/project/mhash/mhash/0.9.9.9/mhash-0.9.9.9.tar.gz</span><br><span class="line">./configure &amp;&amp; make &amp;&amp; make install</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/lib/* /usr/lib/</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/libmcrypt-config /usr/bin/</span><br><span class="line"></span><br><span class="line">wget https://jaist.dl.sourceforge.net/project/mcrypt/MCrypt/2.6.8/mcrypt-2.6.8.tar.gz</span><br><span class="line"><span class="comment"># è§£å†³æŠ¥é”™ï¼šconfigure: error: *** libmcrypt was not found</span></span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/libmcrypt_config /usr/bin/libmcrypt_config</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/lib: LD_LIBRARY_PATH</span><br><span class="line">./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h2 id="å®‰è£…PHP"><a href="#å®‰è£…PHP" class="headerlink" title="å®‰è£…PHP"></a>å®‰è£…PHP</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://www.php.net/distributions/php-7.4.5.tar.gz</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>liunx</tag>
      </tags>
  </entry>
  <entry>
    <title>code</title>
    <url>/2020/05/13/code/</url>
    <content><![CDATA[<p>categories: æµ‹è¯•<br>    #!/usr/bin/python3<br>    def main():<br>        print(â€œhello worldâ€)</p>
<pre><code>if __name__ == &quot;__mian__&quot;:
    main()</code></pre><h1 id="ceshi"><a href="#ceshi" class="headerlink" title="ceshi"></a>ceshi</h1><pre><code>#!/bin/bash
echo &quot;ceshi&quot;</code></pre><p> cehshi</p>
<pre><code>#!/usr/bin/python3
    def main():
        print(&quot;hello world&quot;)

    if __name__ == &quot;__mian__&quot;:
        main()</code></pre><p>hexo æ–‡ç« æ’å…¥å›¾ç‰‡çš„æ–¹æ³•<br><br>è®¾ç½®ç«™ç‚¹é…ç½®_config.yml:å°†post_asset_folder: falseæ”¹ä¸ºpost_asset_folder: true<br><br>å®‰è£…æ’ä»¶:npm install <a href="https://github.com/CodeFalling/hexo-asset-image" target="_blank" rel="noopener">https://github.com/CodeFalling/hexo-asset-image</a> â€“ save<br><br>è¿è¡Œhexo n â€œXXXXXXâ€,ç”ŸæˆXXXXX.mdåšæ–‡æ—¶å°±ä¼šåœ¨/source/_postsç›®å½•ä¸‹ç”ŸæˆXXXXXXçš„æ–‡ä»¶å¤¹ï¼Œå°†ä½ æƒ³åœ¨XXXXXåšæ–‡ä¸­æ’å…¥çš„ç…§ç‰‡æ”¾ç½®åˆ°è¿™ä¸ªåŒåæ–‡ä»¶å¤¹ä¸­å³å¯ï¼Œå›¾ç‰‡çš„å‘½åéšæ„<br><br>æ·»åŠ å›¾ç‰‡:åœ¨æƒ³æ·»åŠ çš„ä½ç½®å†™å…¥![](å›¾ç‰‡åå­—.å›¾ç‰‡æ ¼å¼),ä¾‹å¦‚![](1.png)</p>
]]></content>
  </entry>
  <entry>
    <title>docker--å®¹å™¨åˆ›å»ºåæ·»åŠ ç«¯å£æ˜ å°„</title>
    <url>/2020/05/13/docker/</url>
    <content><![CDATA[<p>æ ‡æ³¨ï¼š[hash_of_the_container] ä¸ºå®¹å™¨id</p>
<pre><code>vim /var/lib/docker/containers/[hash_of_the_container]/hostconfig.json</code></pre><p>åœ¨ hostconfig.json é‡Œæœ‰ â€œPortBindingsâ€:{} è¿™ä¸ªé…ç½®é¡¹ï¼Œ</p>
<p>æ”¹æˆ </p>
<pre><code>&quot;PortBindings&quot;:{&quot;9001/tcp&quot;:[{&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;900&quot;}]}
      å‰è€…ä¸ºå®¹å™¨ç«¯å£ï¼Œåè€…ä¸ºå®¿ä¸»æœºç«¯å£</code></pre><p>å¦‚æœå®¹å™¨å†…ç«¯å£ä»æ²¡æœ‰æš´éœ²ï¼Œéœ€è¦åœ¨ä¿®æ”¹config.v2.json</p>
<pre><code>vim /var/lib/docker/containers/[hash_of_the_container]/config.v2.json</code></pre><p>åœ¨ config.v2.json é‡Œé¢æ·»åŠ ä¸€ä¸ªé…ç½®é¡¹ </p>
<pre><code>&quot;ExposedPorts&quot;:{&quot;80/tcp&quot;:{}} ,</code></pre><p><font color="#FF0000">å¿…é¡»å°†è¿™ä¸ªé…ç½®é¡¹æ·»åŠ åˆ° â€œTtyâ€: true, å‰é¢</font></p>
<p>æœ€åé‡å¯ dockerçš„å®ˆæŠ¤è¿›ç¨‹ systemctl restart  docker<br><br>å¯åŠ¨å®¹å™¨id   docker start   ID<br></p>
<p>ä½¿ç”¨docker ps  æŸ¥çœ‹å®¹å™¨ç«¯å£æ˜¯å¦æ˜ å°„<br><img src="/2020/05/13/docker/1.png" alt></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>liunx</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>python-str</title>
    <url>/2020/04/23/python-str/</url>
    <content><![CDATA[<p>code here<br>ä»å­—ç¬¦ä¸²ä¸­æå–å­—ç¬¦</p>
<pre><code>str = &quot;hello python&quot;
print(str[7])</code></pre><p>forå¾ªç¯éå†å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦</p>
<pre><code>for c in str:
    print(c)</code></pre><p>ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦</p>
<pre><code>str = &quot;hello python&quot;
print(len(str))</code></pre><p>ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str = <span class="string">"hello python"</span></span><br><span class="line">print(str.count(<span class="string">"l"</span>))</span><br></pre></td></tr></table></figure>
<pre><code>puts &quot;Awesome!&quot; unless lame</code></pre><pre><code>

    ä»£ç 

</code></pre>
]]></content>
      <categories>
        <category>å¼€å‘</category>
      </categories>
      <tags>
        <tag>liunx</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¨çƒåŠ é€Ÿ--é˜¿é‡Œäº‘</title>
    <url>/2020/01/16/jiasu/</url>
    <content><![CDATA[<h1 id="å…¨çƒåŠ é€Ÿ"><a href="#å…¨çƒåŠ é€Ÿ" class="headerlink" title="å…¨çƒåŠ é€Ÿ"></a>å…¨çƒåŠ é€Ÿ</h1><p>é¦–å…ˆç¡®å®šåŠ é€ŸåŒºåŸŸä»¥åŠæœåŠ¡åŒºåŸŸ<br><br>ä¾‹å¦‚ï¼šä¸šåŠ¡æœåŠ¡å™¨åœ¨ååŒ—2ï¼ˆåŒ—äº¬ï¼‰,æƒ³è®©ç¾å›½çš„ç©å®¶æµç•…è®¿é—®,éœ€è¦è´­ä¹°åŠ é€ŸåŒºåŸŸåœ¨åŒ—ç¾,æœåŠ¡åŒºåŸŸåœ¨ä¸­å›½å¤§é™†<br></p>
<p>åˆ›å»ºå…¨çƒåŠ é€Ÿåï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç¾å›½IPï¼ŒæŠŠè¿™ä¸ªIPå’ŒååŒ—2æœåŠ¡å™¨çš„IPç»‘å®šåŒä¸€ä¸ªåŸŸåï¼Œæ ¹æ®è§£æè·¯çº¿åŒºåˆ†è§£æã€‚<br><br>å¦‚æœæ˜¯åŒ—äº¬åœ°åŒºè®¿é—®è¿™ä¸ªIPï¼Œè¿”å›çš„æ˜¯ååŒ—2çš„æœåŠ¡å™¨IPã€‚ç›¸åå¦‚æœæ˜¯ç¾å›½ç©å®¶è®¿é—®ï¼Œåˆ™ä¼šè¿”å›å…¨çƒåŠ é€Ÿçš„IPã€‚<br></p>
<pre><code>è§£æè·¯çº¿ï¼šæ¯”å¦‚ï¼ŒDnsCEOçš„æ™ºèƒ½DNSå°±ä¼šè‡ªåŠ¨åˆ¤æ–­ç”¨æˆ·çš„ä¸Šç½‘è·¯çº¿æ˜¯è”é€šè¿˜æ˜¯ç”µä¿¡ï¼Œç„¶åæ™ºèƒ½è¿”å›è”é€šæˆ–è€…ç”µä¿¡çš„æœåŠ¡å™¨IPã€‚å¤šçº¿å¤šåœ°åŒºæ™ºèƒ½DNSï¼Œèƒ½è‡ªåŠ¨åˆ¤æ–­ç”¨æˆ·çš„ä¸Šç½‘è·¯çº¿æ˜¯ä¸Šæµ·ç”µä¿¡è¿˜æ˜¯å¹¿ä¸œç”µä¿¡ï¼Œç„¶åæ™ºèƒ½è¿”å›å¯¹åº”çš„ä¸Šæµ·ç”µä¿¡å’Œå¹¿ä¸œç”µä¿¡çš„æœåŠ¡å™¨IPã€‚</code></pre><p>ä¾‹å¦‚ï¼š<br>    <br>æ–°åŠ å¡å®ä¾‹éœ€è¦æ‹¥æœ‰å¼¹æ€§å…¬ç½‘IP   (ECSæ§åˆ¶å°â€“&gt;æ›´å¤šâ€“&gt;ç½‘ç»œå’Œå®‰å…¨ç»„â€“&gt;å…¬ç½‘IPè½¬ä¸ºå¼¹æ€§å…¬ç½‘IP)<br></p>
<pre><code>è¿˜éœ€è¦åˆ›å»ºä¸ªå¼¹æ€§ç½‘å¡
    ç½‘å¡åç§°ï¼šè‡ªå®šä¹‰
    ä¸“æœ‰ç½‘ç»œï¼šéœ€åŒECSåŒä¸€ç½‘ç»œ
    äº¤æ¢æœºï¼šéœ€åŒECSåŒä¸€ç½‘ç»œ
    å®‰å…¨ç»„ï¼šéœ€åŒECSåŒä¸€ç½‘ç»œ
ç„¶åç»‘å®šECS</code></pre><p>åˆ›å»ºä¸€ä¸ªå…¨çƒåŠ é€Ÿå®ä¾‹ï¼Œåœ¨å…¨çƒåŠ é€Ÿä¸»ç•Œé¢æ‰¾åˆ°å®ä¾‹ï¼Œç„¶åæ·»åŠ IP(è´­ä¹°ä¸ªipå°±å¥½)ã€‚ç„¶åç‚¹å‡»åˆ›å»ºçš„ipï¼Œç»‘å®šä¸€ä¸ªæ–°åŠ å¡çš„å®ä¾‹</p>
<p>æœ€ååŸŸåè§£æ</p>
<p>éœ€è¦è´­ä¹°ä¸€ä¸ªåŸŸåç‰ˆæœ¬ç®¡ç†å¥—é¤ ç»‘å®šä¸€ä¸ªå­åŸŸå<br>ç„¶åç”¨å­åŸŸåè§£æAè®°å½•</p>
<pre><code>test    A    ä¸–ç•Œ_åŒ—ç¾æ´²     xxx.xxx.xxx.xxx(å…¨çƒåŠ é€Ÿip)
test    A    é»˜è®¤         xxx.xxx.xxx.xxx(æœåŠ¡å™¨ip)</code></pre>]]></content>
      <categories>
        <category>é˜¿é‡Œäº‘</category>
      </categories>
      <tags>
        <tag>é˜¿é‡Œäº‘</tag>
      </tags>
  </entry>
  <entry>
    <title>mongodbå®‰è£…ä»¥åŠåŸºç¡€æ“ä½œ</title>
    <url>/2020/01/08/mongo/</url>
    <content><![CDATA[<h1 id="å®‰è£…mongoæ•°æ®åº“"><a href="#å®‰è£…mongoæ•°æ®åº“" class="headerlink" title="å®‰è£…mongoæ•°æ®åº“"></a>å®‰è£…mongoæ•°æ®åº“</h1><pre><code>cd  /etc/yum.repos.d/
vim   mongodb-org-3.2.repo
[mogodb-org]
name=MongoDB Repository
baseurl=http://mirrors.aliyun.com/mongodb/yum/redhat/6Server/mongodb-org/3.4/x86_64/
gpgcheck=0
enabled=1</code></pre><p>ç„¶åä¿å­˜é€€å‡º</p>
<pre><code>yum clean all    # æ¸…é™¤ç¼“å­˜
yum install  mongod-org  -y</code></pre><h1 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h1><pre><code># mongod.conf

# for documentation of all options, see:
#   http://docs.mongodb.org/manual/reference/configuration-options/

# where to write logging data.
systemLog:
  destination: file
  logAppend: true
  path: /var/log/mongodb/mongod.log     #  æ—¥å¿—æ–‡ä»¶è·¯å¾„

# Where and how to store data.
storage:
  dbPath: /var/lib/mongo    # æ•°æ®ä¿å­˜è·¯å¾„
  journal:
    enabled: true        # æ˜¯å¦å¼€å¯
#  engine:
#  mmapv1:
#  wiredTiger:

# how the process runs
processManagement:
  fork: true  # fork and run in background
  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile

# network interfaces
net:
  port: 27017        # ç›‘å¬ç«¯å£
  bindIp: 192.168.1.163  # å…è®¸è¿æ¥çš„IP


#security:
#security:

#  authorization: enabled

#operationProfiling:

#replication:

#sharding:
## Enterprise-Only Options

#auditLog:

#snmp:</code></pre><h1 id="å¢åˆ æ”¹æŸ¥"><a href="#å¢åˆ æ”¹æŸ¥" class="headerlink" title="å¢åˆ æ”¹æŸ¥"></a>å¢åˆ æ”¹æŸ¥</h1><pre><code>mongo   IP   #  è¿›å…¥æ•°æ®åº“

show  dbs    # æŸ¥çœ‹æ‰€æœ‰åº“

show tables    # æŸ¥çœ‹å½“å‰åº“çš„æ‰€æœ‰è¡¨

use   DBNAME    # è¿›å…¥æ•°æ®åº“

db.table.find()        # æŸ¥çœ‹è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®

db.table.find({name : xxx})    # æŸ¥çœ‹è¡¨ä¸­nameä¸ºxxxçš„æ•°æ®

db.table.find({name : xxx}).pretty()    # æŸ¥çœ‹è¡¨ä¸­nameä¸ºxxxçš„æ•°æ®   ä»¥jsonæ ¼å¼æ˜¾ç¤º

db.table.count()    # ç»Ÿè®¡æ•°æ®è¡Œæ•°

db.tables.find().count()    # ç»Ÿè®¡è¡Œæ•°   åŒä¸Š

db.table.count({name : xxx})    # ç»Ÿè®¡nameä¸ºxxxçš„è¡Œæ•°

db.table.update({},{$set:{name : xxx}})        # æŠŠè¡¨ä¸­æ‰€æœ‰æ•°æ®çš„name æ”¹ä¸º xxx

db.table.update({name : xxx},{$set:{ID : 666}})        # æŠŠname ä¸º xxx çš„ID æ”¹ä¸º666  ï¼ˆåªæ›´æ”¹åŒ¹é…åˆ°çš„ç¬¬ä¸€æ¡æ•°æ®ï¼‰

db.table.update({name : xxx},{$set:{ID : 666}},false,true)    # æŠŠå…¨éƒ¨name ä¸º xxxçš„ID æ”¹ä¸º666  ï¼ˆåŒ¹é…åˆ°çš„æ‰€æœ‰æ•°æ®ï¼‰

db.copyDatabase(&apos;old_name&apos;, &apos;new_name&apos;, &apos;localhost&apos;)    # å¤åˆ¶æ•°æ®åº“

use  DBNAME     # è¿›å…¥æ•°æ®åº“
db.dropDatabase()    # åˆ é™¤å½“å‰æ‰€åœ¨çš„åº“

db.table.drop()        # åˆ é™¤è¡¨

db.table.remove({})    # åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®

db.table.remove({name : xxx})    # åˆ é™¤è¡¨ä¸­è¢«åŒ¹é…åˆ°çš„ç¬¬ä¸€æ¡æ•°æ®

db.table.remove({name : xxx},false,true)    # åˆ é™¤è¡¨ä¸­è¢«åŒ¹é…åˆ°çš„æ‰€æœ‰æ•°æ®

use DBNAME     # è¿›å…¥æ•°æ®åº“
db.create.table()    # åˆ›å»ºä¸€ä¸ªè¡¨      å¦‚æœè¿™ä¸ªæ•°æ®åº“ä¹‹å‰ä¸å­˜åœ¨  åˆ›å»ºè¡¨åä¼šè‡ªåŠ¨åˆ›å»ºåº“</code></pre><h1 id="å¢åˆ æ”¹æŸ¥â€“æ‰©å±•"><a href="#å¢åˆ æ”¹æŸ¥â€“æ‰©å±•" class="headerlink" title="å¢åˆ æ”¹æŸ¥â€“æ‰©å±•"></a>å¢åˆ æ”¹æŸ¥â€“æ‰©å±•</h1><pre><code>db.roles.find({&quot;ID&quot;:{&quot;$lte&quot;: 200,&quot;$gte&quot;:155 },userType:41})    # èŒƒå›´æŸ¥è¯¢  æŸ¥çœ‹ID å°äºç­‰äº200  å¤§äºç­‰äº155 å¹¶ä¸”userType=41 çš„æ•°æ®

db.roles.find({ &quot;name&quot; : {$regex:/å¤§æ°”çš„.*/i}})        # æ¨¡ç³ŠæŸ¥è¯¢    åŒ¹é…name åŒ…å«&quot;å¤§æ°”çš„&quot; æ•°æ®

db.towers.update({&quot;_id&quot; : ObjectId(&quot;5a6205e275a50f321e04b8ae&quot;)},{$set:{ &quot;levelCustomList.1.state&quot;:2}})        # æŠŠåŒ¹é…æ•°æ®çš„levelCustomlistçš„ç¬¬äºŒä¸ªå­—æ®µ(state) çš„å€¼æ”¹ä¸º 2

db.oreseasons.update({&quot;_id&quot; : ObjectId(&quot;5ad227d8da0d2e0522930156&quot;)},{$unset:{&quot;groups.0&quot;:&apos;&apos;}},false, true)    # æŠŠåŒ¹é…æ•°æ®çš„groupsä¸­ç¬¬ä¸€ä¸ªå­—æ®µåˆ é™¤</code></pre><h1 id="æ•°æ®åº“çš„å¤‡ä»½ä»¥åŠæ¢å¤"><a href="#æ•°æ®åº“çš„å¤‡ä»½ä»¥åŠæ¢å¤" class="headerlink" title="æ•°æ®åº“çš„å¤‡ä»½ä»¥åŠæ¢å¤"></a>æ•°æ®åº“çš„å¤‡ä»½ä»¥åŠæ¢å¤</h1><pre><code>mongodump   -h  IP    -d  DBNAME    -o  dir    # å¤‡ä»½æ•°æ®åº“

mongorestore   -h  IP   -d    DBNAME     dir/DBNAME/    # æ¢å¤æ•°æ®åº“</code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>mongo</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>sshpass</title>
    <url>/2019/12/27/sshpass/</url>
    <content><![CDATA[<h3 id="ä½¿ç”¨å‰æï¼šå¯¹äºæœªè¿æ¥è¿‡çš„ä¸»æœºã€‚è€Œåˆä¸è¾“å…¥yesè¿›è¡Œç¡®è®¤ã€‚éœ€è¦sshdæœåŠ¡çš„ä¼˜åŒ–ï¼š"><a href="#ä½¿ç”¨å‰æï¼šå¯¹äºæœªè¿æ¥è¿‡çš„ä¸»æœºã€‚è€Œåˆä¸è¾“å…¥yesè¿›è¡Œç¡®è®¤ã€‚éœ€è¦sshdæœåŠ¡çš„ä¼˜åŒ–ï¼š" class="headerlink" title="ä½¿ç”¨å‰æï¼šå¯¹äºæœªè¿æ¥è¿‡çš„ä¸»æœºã€‚è€Œåˆä¸è¾“å…¥yesè¿›è¡Œç¡®è®¤ã€‚éœ€è¦sshdæœåŠ¡çš„ä¼˜åŒ–ï¼š"></a>ä½¿ç”¨å‰æï¼šå¯¹äºæœªè¿æ¥è¿‡çš„ä¸»æœºã€‚è€Œåˆä¸è¾“å…¥yesè¿›è¡Œç¡®è®¤ã€‚éœ€è¦sshdæœåŠ¡çš„ä¼˜åŒ–ï¼š</h3><pre><code># vim /etc/ssh/ssh_config   
StrictHostKeyChecking no
GSSAPIAuthentication no
UseDNS no

# service sshd restart</code></pre><h3 id="sshpass-å‘½ä»¤å®‰è£…ï¼š"><a href="#sshpass-å‘½ä»¤å®‰è£…ï¼š" class="headerlink" title="sshpass å‘½ä»¤å®‰è£…ï¼š"></a>sshpass å‘½ä»¤å®‰è£…ï¼š</h3><pre><code># yum -y install sshpass</code></pre><h3 id="sshpassçš„ç”¨æ³•ä¸¾ä¾‹"><a href="#sshpassçš„ç”¨æ³•ä¸¾ä¾‹" class="headerlink" title="sshpassçš„ç”¨æ³•ä¸¾ä¾‹"></a>sshpassçš„ç”¨æ³•ä¸¾ä¾‹</h3><pre><code>sshpass -p password ssh -o StrictHostKeyChecking=no lius@192.168.33.56 &quot;ls /tmp&quot;

-p: æŒ‡å®šå¯†ç 
-o: sshæˆ–scpçš„ä¸€ä¸ªé€‰é¡¹, StrictHostKeyChecking=noè¡¨ç¤ºåœ¨ç¬¬ä¸€æ¬¡ä¸»æœºè®¤è¯çš„æ—¶å€™, è‡ªåŠ¨æ¥æ”¶è¿œç«¯ä¸»æœºå¯†é’¥.</code></pre><h3 id="å¸¸ç”¨æ¡ˆä¾‹"><a href="#å¸¸ç”¨æ¡ˆä¾‹" class="headerlink" title="å¸¸ç”¨æ¡ˆä¾‹"></a>å¸¸ç”¨æ¡ˆä¾‹</h3><pre><code>#!/bin/bash
sshpass  -p password  ssh  -o  StrictHostKeyChecking=no  xxxx@IP  &lt;&lt; restartserver
cd   /subverison/data/
svn update

restartserver</code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>sshpass</tag>
      </tags>
  </entry>
  <entry>
    <title>jenkinsé¡¹ç›®è¿ç§»</title>
    <url>/2019/12/24/remove/</url>
    <content><![CDATA[<pre><code>systemctl stop jenkins
cp -rp /var/lib/jenkins /home/jenkins
sed -i s&apos;@/var/lib/jenkins@/home/jenkins@&apos; /etc/sysconfig/jenkins #ä¿®æ”¹ä¸»ç›®å½•
systemctl start jenkins
rm -rf /var/lib/jenkins</code></pre>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>jenkinsæ·»åŠ æ™®é€šç”¨æˆ·è®¾ç½®æƒé™</title>
    <url>/2019/12/24/jenkins/</url>
    <content><![CDATA[<h3 id="jenkinsåˆ›å»ºæ™®é€šç”¨æˆ·å¹¶é…ç½®æƒé™"><a href="#jenkinsåˆ›å»ºæ™®é€šç”¨æˆ·å¹¶é…ç½®æƒé™" class="headerlink" title="jenkinsåˆ›å»ºæ™®é€šç”¨æˆ·å¹¶é…ç½®æƒé™"></a>jenkinsåˆ›å»ºæ™®é€šç”¨æˆ·å¹¶é…ç½®æƒé™</h3><p><br>1ã€é¦–å…ˆåœ¨Manage Jenkins â€“&gt; ç”¨æˆ·ç®¡ç†  åˆ›å»ºç”¨æˆ·<br><br>2ã€ç„¶ååœ¨Manage Jenkins â€“&gt; å…¨å±€è®¾ç½® æˆæƒç­–ç•¥é€‰æ‹©ï¼š<br><br>é¡¹ç›®çŸ©é˜µæˆæƒç­–ç•¥  æ·»åŠ ç”¨æˆ·æˆ–è€…ç”¨æˆ·ç»„ é€‰æ‹©æƒé™<br><br><img src="/2019/12/24/jenkins/1.png" alt><br><br>3ã€æ‰¾åˆ°éœ€è¦æˆæƒçš„é¡¹ç›®ç‚¹å‡»é…ç½®<br><br><img src="/2019/12/24/jenkins/2.png" alt><br><br>å¯ç”¨é¡¹ç›®å®‰å…¨<br><br><img src="/2019/12/24/jenkins/3.png" alt><br><br>æ·»åŠ adminç”¨æˆ·ä»¥åŠå…¶ä»–ç”¨æˆ·<br><br><img src="/2019/12/24/jenkins/4.png" alt><br><br>æœ€åç™»å½•æµ‹è¯•<br><br><br><br></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>subversion+jenkinkséƒ¨ç½²</title>
    <url>/2019/12/03/test/</url>
    <content><![CDATA[<ul>
<li><a href="#1">1.subversion+jenkinså®‰è£…éƒ¨ç½²</a><ul>
<li><a href="#2">1.1é…ç½®ç¯å¢ƒ</a></li>
<li><a href="#3">1.2å®‰è£…jenkins</a></li>
<li><a href="#4">1.3å®‰è£…subversion</a></li>
</ul>
</li>
</ul>
<p>#</p><h4 id="2">1.1é…ç½®ç¯å¢ƒ<br>    ç¯å¢ƒï¼šcentos6.9<br>    è½¯ä»¶åŒ…ï¼šjdk-8u60-linux-x64.tar.gz<br>é¦–å…ˆå…³é—­selinuxå’Œé˜²ç«å¢™<br><br><img src="/2019/12/03/test/1.png" alt><br><br>æ›´æ”¹æ—¶é—´      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;â€“å¯ä»¥å†™å…¥è®¡åˆ’ä»»åŠ¡ä¸­<br><br><img src="/2019/12/03/test/3.png" alt><br><br>åˆ›å»ºç›®å½•   <p></p>
<pre><code>mkdir /application/</code></pre><p><br>è§£å‹jdkåŒ…åˆ°åˆ›å»ºçš„ç›®å½•ä¸­<br></p>
<pre><code>tar xf jdk-8u60-linux-x64.tar.gz   -C /application/</code></pre><p><br>åšè½¯è¿æ¥<br></p>
<pre><code>ln -s  /application/jdk1.8.0_60/ /application/jdk</code></pre><p><br>è®¾ç½®ç¯å¢ƒå˜é‡<br></p>
<pre><code>sed -i.ori &apos;$a export  JAVA_HOME=/application/jdk\nexport PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH\nexport  CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar&apos;  /etc/profile</code></pre><p><br>sourceä¸€ä¸‹ç”Ÿæ•ˆç¯å¢ƒå˜é‡<br><br><img src="/2019/12/03/test/2.png" alt><br><br><img src="/2019/12/03/test/4.png" alt><br></p>
<h4 id="3">1.2å®‰è£…jenkins

<p>ä¸‹è½½yumæºå¹¶ä¸”å¯¼å…¥ç§˜é’¥</p>
<br>

<pre><code>wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo&lt;br/&gt;

rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key</code></pre><p><br><img src="/2019/12/03/test/5.png" alt><br></p>
<pre><code>yum install jenkins -y </code></pre><p><br><img src="/2019/12/03/test/6.png" alt><br></p>
<pre><code>å¦‚æœå®‰è£…å¤±è´¥å°±åˆ°å®˜ç½‘ä¸‹è½½jenkinsçš„rpmåŒ…
http://pkg.jenkins-ci.org/redhat-stable/</code></pre><p>ç¼–è¾‘é…ç½®æ–‡ä»¶æ›´æ”¹ç«¯å£å¯åŠ¨jenkins</p>
<pre><code>vim /etc/sysconfig/jenkins</code></pre><p>æ‰¾åˆ°ä¿®æ”¹ç«¯å£å·ï¼š<br><br>JENKINS_PORT=â€8080â€  # æ­¤ç«¯å£ä¸å†²çªå¯ä»¥ä¸ä¿®æ”¹<br></p>
<pre><code>service  jenkins  start</code></pre><p><img src="/2019/12/03/test/7.png" alt><br><br>è¿™é‡Œä¼šæŠ¥é”™ å› ä¸ºJenkinsé»˜è®¤æ‰¾çš„jdkç¯å¢ƒå˜é‡åœ¨/usr/binä¸‹  æˆ‘ä»¬éœ€è¦æ›´æ”¹ä¸‹è·¯å¾„<br></p>
<pre><code>vim  /etc/init.d/jenkins</code></pre><p><br>æ‰¾åˆ°candidates=â€   è¿™ä¸ªé…ç½®é¡¹<br><br><img src="/2019/12/03/test/8.png" alt><br><br>å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ‰¾åˆ°è·¯å¾„<br><br><img src="/2019/12/03/test/9.png" alt><br><br>ç„¶ååœ¨æ¬¡å¯åŠ¨Jenkins    æˆåŠŸ<br><br><img src="/2019/12/03/test/10.png" alt><br><br>åœ¨æµè§ˆå™¨ä¸­è®¿é—®<br><br>é¦–æ¬¡è¿›å…¥ä¼šè¦æ±‚è¾“å…¥åˆå§‹å¯†ç å¦‚ä¸‹å›¾ï¼Œ<br><br><img src="/2019/12/03/test/11.png" alt><br><br>åˆå§‹å¯†ç åœ¨ï¼š/var/lib/jenkins/secrets/initialAdminPassword<br><img src="/2019/12/03/test/12.png" alt><br><br><img src="/2019/12/03/test/13.png" alt><br><br><img src="/2019/12/03/test/14.png" alt><br><br><img src="/2019/12/03/test/15.png" alt><br><br><img src="/2019/12/03/test/16.png" alt><br><br><img src="/2019/12/03/test/17.png" alt><br><br><img src="/2019/12/03/test/18.png" alt><br><br><img src="/2019/12/03/test/19.png" alt><br><br><img src="/2019/12/03/test/20.png" alt></p>
<h4 id="4">1.3å®‰è£…subversion

<p>é…ç½®å¥½yumæº ç›´æ¥yumå®‰è£…subversion </p>
<pre><code>yum -y install subversion </code></pre><p><br><img src="/2019/12/03/test/21.png" alt><br><br>æŸ¥çœ‹ç‰ˆæœ¬å·</p>
<pre><code>svnserve --version</code></pre><p>é€’å½’åˆ›å»ºç›®å½•</p>
<pre><code>mkdir  /data/svn/program   -p</code></pre><p><br><img src="/2019/12/03/test/22.png" alt><br><br>åˆ›å»ºsvnç‰ˆæœ¬åº“</p>
<pre><code>svnadmin create /data/svn/program/</code></pre><p>é…ç½®è´¦å·ï¼š</p>
<pre><code>vim /data/svn/program/conf/passwd

    [manager]
    xinlong = xinlong</code></pre><p><br><img src="/2019/12/03/test/23.png" alt><br><br>é…ç½®æƒé™ï¼š</p>
<pre><code>vim /data/svn/program/conf/authz

    [groups]
    manager = xinlong

    [program:/]
    @manager = rw</code></pre><p><br><img src="/2019/12/03/test/24.png" alt><br><br>é…ç½®æœåŠ¡ï¼š</p>
<pre><code>vim /data/svn/program/conf/svnserve.conf

    anon-access = none ## åŒ¿åç”¨æˆ·å¯è¯»(å…³é—­)
    auth-access = write ## æˆæƒç”¨æˆ·å¯å†™
    password-db = /data/svn/program/conf/passwd ## æŒ‡å®šè´¦å·é…ç½®æ–‡ä»¶   ç»å¯¹è·¯å¾„
    authz-db = /data/svn/program/conf/authz ## æŒ‡å®šæƒé™é…ç½®æ–‡ä»¶  ç»å¯¹è·¯å¾„
    realm = /data/svn/program ## æŒ‡å®šç‰ˆæœ¬åº“çš„è®¤è¯åŸŸï¼Œå³åœ¨ç™»å½•æ—¶æç¤ºçš„è®¤è¯åŸŸåç§°ã€‚ç¼ºçœå€¼ï¼šä¸€ä¸ªUUID(Universal Unique IDentifierï¼Œå…¨å±€å”¯ä¸€æ ‡ç¤º)ã€‚</code></pre><p><br><img src="/2019/12/03/test/25.png" alt><br><br>å¯åŠ¨subversion</p>
<p>å¼€é€šHTTPåè®® å®‰è£…httpdåŠå…¶svnæ¨¡å—</p>
<pre><code>yum -y install httpd mod_dav_svn</code></pre><p><br><img src="/2019/12/03/test/26.png" alt><br><br>ç¡®è®¤æ¨¡å— dav/dav_svn å·²åŠ è½½<br><br>(Centos6  è·¯å¾„æ˜¯/etc/httpd/conf/httpd.conf )<br></p>
<pre><code>grep -E &quot;dav_module&quot; /etc/httpd/conf.modules.d/00-dav.conf</code></pre><p><br><img src="/2019/12/03/test/27.png" alt><br><br>( Centos6  è·¯å¾„æ˜¯ /etc/httpd/conf.d/subversion.conf )</p>
<pre><code>grep -E &quot;dav_svn_module&quot; /etc/httpd/conf.modules.d/10-subversion.conf</code></pre><p><br><img src="/2019/12/03/test/28.png" alt><br><br>SVN HTTP é…ç½®</p>
<pre><code>vim /etc/httpd/conf/httpd.conf

    &lt;Location /program&gt;
    DAV svn
    SVNPath /data/svn/program
    AuthType Basic
    AuthName &quot;SVN program repository&quot;
    AuthUserFile /data/svn/program/conf/svn-auth.htpasswd
    AuthzSVNAccessFile /data/svn/program/conf/authz
    # Authorization: Authenticated users only
    # SVNListParentPath on
    Satisfy all
    Require valid-user
    &lt;/Location&gt;</code></pre><p><br><img src="/2019/12/03/test/29.png" alt><br><br>åˆ›å»º SVN HTTP ç”¨æˆ·</p>
<pre><code>-m è¡¨ç¤ºä»¥ md5 åŠ å¯†å¯†ç 

touch  /data/svn/program/conf/svn-auth.htpasswd</code></pre><p><br><img src="/2019/12/03/test/30.png" alt><br></p>
<pre><code>htpasswd -m  /data/svn/program/conf/svn-auth.htpasswd    xinlong</code></pre><p><br><img src="/2019/12/03/test/31.png" alt><br><br>å¯åŠ¨httpdæœåŠ¡<br><br><img src="/2019/12/03/test/32.png" alt><br><br>å®¢æˆ·ç«¯éªŒè¯(<a href="http://xxx" target="_blank" rel="noopener">http://xxx</a>)</p>
<p>Windows ä¸‹ä½¿ç”¨ Chrome æµè§ˆå™¨è®¿é—®: <a href="http://ip/program/ï¼Œè¾“å…¥ç”¨æˆ·å" target="_blank" rel="noopener">http://ip/program/ï¼Œè¾“å…¥ç”¨æˆ·å</a> chalres åŠå…¶å¯†ç ï¼ŒæˆåŠŸã€‚<br><br><img src="/2019/12/03/test/33.png" alt><br><br><br>TortoiseSVNæ£€æµ‹<br><br>å³å‡»  ç‚¹å‡»SVN checkout<br><br><img src="/2019/12/03/test/34.png" alt><br><br><img src="/2019/12/03/test/35.png" alt><br><br><img src="/2019/12/03/test/36.png" alt><br><br><img src="/2019/12/03/test/37.png" alt><br><br><img src="/2019/12/03/test/38.png" alt><br><br>ç„¶åå³å‡» ç‚¹å‡»SVN commit</p>
<p><img src="/2019/12/03/test/39.png" alt><br><br><img src="/2019/12/03/test/40.png" alt><br><br><img src="/2019/12/03/test/41.png" alt><br><br><img src="/2019/12/03/test/42.png" alt><br><br>è®¿é—®ç½‘ç«™ä¹Ÿå¯ä»¥çœ‹åˆ°</p>
<p><img src="/2019/12/03/test/43.png" alt><br><br><img src="/2019/12/03/test/44.png" alt><br></p>
<h3 id="è¿›å…¥Jenkinsçš„ä¸»ç•Œé¢ç‚¹å‡»æ–°å»ºæˆ–åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡"><a href="#è¿›å…¥Jenkinsçš„ä¸»ç•Œé¢ç‚¹å‡»æ–°å»ºæˆ–åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡" class="headerlink" title="è¿›å…¥Jenkinsçš„ä¸»ç•Œé¢ç‚¹å‡»æ–°å»ºæˆ–åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡"></a>è¿›å…¥Jenkinsçš„ä¸»ç•Œé¢ç‚¹å‡»æ–°å»ºæˆ–åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡<br></h3><p><br>è¾“å…¥é¡¹ç›®çš„åå­—é€‰æ‹©è‡ªç”±é£æ ¼ç‚¹å‡»OK<br><br><img src="/2019/12/03/test/45.png" alt><br><br><img src="/2019/12/03/test/46.png" alt><br><br>é€‰æ‹©æºç ç®¡ç†ä¸­çš„Subversion(SVN) å¡«å†™ç¬¬äº”æ­¥æ­å»ºSVNçš„åœ°å€(é‡Œé¢éœ€è¦æœ‰ä»£ç )<br><br><img src="/2019/12/03/test/47.png" alt><br><br><img src="/2019/12/03/test/48.png" alt><br><br><img src="/2019/12/03/test/49.png" alt><br><br><img src="/2019/12/03/test/50.png" alt><br><br><img src="/2019/12/03/test/51.png" alt><br><br><img src="/2019/12/03/test/52.png" alt><br><br><img src="/2019/12/03/test/53.png" alt><br><br><img src="/2019/12/03/test/54.png" alt></p>
<pre><code>    #!/bin/bash
date=`date +&quot;%H:%M&quot;`
file=`ls -l  /data/program/  |grep db  |awk -F&quot; &quot; &apos;{print $(NF-1)}&apos;`
if [ &quot;$date&quot; == &quot;$file&quot; ];then
echo &quot;no&quot;
else
echo &quot;checkout&quot;
svn  checkout  http://192.168.1.240/program/  /data/install/   --username  xinlong
echo &quot;OK&quot; &gt;/data/ok.txt
echo &quot;OK&quot;
fi</code></pre><p><br><img src="/2019/12/03/test/55.png" alt><br><br><img src="/2019/12/03/test/56.png" alt><br><br><img src="/2019/12/03/test/57.png" alt><br><br><img src="/2019/12/03/test/58.png" alt><br><br><img src="/2019/12/03/test/59.png" alt><br><br><img src="/2019/12/03/test/60.png" alt><br><br><img src="/2019/12/03/test/61.png" alt><br><br><img src="/2019/12/03/test/62.png" alt><br><br><img src="/2019/12/03/test/63.png" alt><br><br><img src="/2019/12/03/test/64.png" alt><br><br><img src="/2019/12/03/test/65.png" alt><br><br><img src="/2019/12/03/test/66.png" alt><br><br><img src="/2019/12/03/test/67.png" alt><br><br><img src="/2019/12/03/test/68.png" alt><br><br><img src="/2019/12/03/test/69.png" alt><br></p>
<h3 id="ä¸‹é¢æ­¥éª¤å¯ä»¥æ›´æ”¹http-svn-ä¸ºhttps"><a href="#ä¸‹é¢æ­¥éª¤å¯ä»¥æ›´æ”¹http-svn-ä¸ºhttps" class="headerlink" title="ä¸‹é¢æ­¥éª¤å¯ä»¥æ›´æ”¹http svn ä¸ºhttps"></a>ä¸‹é¢æ­¥éª¤å¯ä»¥æ›´æ”¹http svn ä¸ºhttps</h3><p><br>å¼€é€š HTTPS åè®®<br></p>
<h3 id="3-1-å®‰è£…-ssl-æ¨¡å—"><a href="#3-1-å®‰è£…-ssl-æ¨¡å—" class="headerlink" title="3.1 å®‰è£… ssl æ¨¡å—"></a>3.1 å®‰è£… ssl æ¨¡å—</h3><pre><code>yum -y install mod_ssl openssl</code></pre><h3 id="3-2-ç”Ÿæˆè¯ä¹¦"><a href="#3-2-ç”Ÿæˆè¯ä¹¦" class="headerlink" title="3.2 ç”Ÿæˆè¯ä¹¦"></a>3.2 ç”Ÿæˆè¯ä¹¦</h3><pre><code>mkdir /etc/httpd/ssl
cp nginx.key /etc/httpd/ssl/httpd.key
cp nginx.crt /etc/httpd/ssl/httpd.crt</code></pre><h3 id="3-3-é…ç½®è¯ä¹¦"><a href="#3-3-é…ç½®è¯ä¹¦" class="headerlink" title="3.3 é…ç½®è¯ä¹¦"></a>3.3 é…ç½®è¯ä¹¦</h3><pre><code>vim /etc/httpd/conf.d/ssl.conf
SSLCertificateFile    /etc/httpd/ssl/httpd.crt
SSLCertificateKeyFile /etc/httpd/ssl/httpd.key</code></pre><p>å¦‚æœè¦åœç”¨ https æ”¹ç”¨ httpï¼Œåªéœ€æ³¨é‡Šä¸‹é¢çš„ SSLRequireSSL ä¸€è¡Œã€‚</p>
<pre><code>vim /etc/httpd/conf/httpd.conf

&lt;Location /program&gt;
    ## ......

    Require valid-user
    SSLRequireSSL
&lt;/Location&gt;</code></pre><h3 id="3-4-é‡å¯æœåŠ¡"><a href="#3-4-é‡å¯æœåŠ¡" class="headerlink" title="3.4 é‡å¯æœåŠ¡"></a>3.4 é‡å¯æœåŠ¡</h3><pre><code>systemctl restart httpd</code></pre><h3 id="3-5-é˜²ç«å¢™æ”¾è¡Œ"><a href="#3-5-é˜²ç«å¢™æ”¾è¡Œ" class="headerlink" title="3.5 é˜²ç«å¢™æ”¾è¡Œ"></a>3.5 é˜²ç«å¢™æ”¾è¡Œ</h3><pre><code>vim /etc/sysconfig/iptables
-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</code></pre><p>é‡å¯ç”Ÿæ•ˆ</p>
<pre><code>sudo systemctl restart iptables</code></pre><h3 id="3-6-å®¢æˆ·ç«¯éªŒè¯-https-xxx"><a href="#3-6-å®¢æˆ·ç«¯éªŒè¯-https-xxx" class="headerlink" title="3.6 å®¢æˆ·ç«¯éªŒè¯(https://xxx)"></a>3.6 å®¢æˆ·ç«¯éªŒè¯(<a href="https://xxx" target="_blank" rel="noopener">https://xxx</a>)</h3><p><br>Windows ä¸‹ä½¿ç”¨ Chrome æµè§ˆå™¨è®¿é—®: <a href="https://ip/program/ï¼Œè¾“å…¥ç”¨æˆ·å" target="_blank" rel="noopener">https://ip/program/ï¼Œè¾“å…¥ç”¨æˆ·å</a> charles åŠå…¶å¯†ç ï¼ŒæˆåŠŸã€‚æ­¤æ—¶åªèƒ½ä½¿ç”¨ https è®¿é—®ï¼Œhttp å·²è¢«ç¦ç”¨ã€‚<br><br><br><br><br><br><br></p>
</h4></h4></h4>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
        <tag>subversion</tag>
      </tags>
  </entry>
</search>
